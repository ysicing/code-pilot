# Claude Code 智能开发系统 - 用户手册

## 🎯 系统概述

### 什么是这个系统？

这是一个**精简而强大的Claude Code工作流系统**，将复杂的开发任务转换为自动化的智能工作流。

**核心特点**：
- **13个核心命令** - 覆盖90%开发场景
- **5个专业角色** - 涵盖所有技术领域
- **3大工作流** - 适配不同项目规模
- **智能路由** - 自动判断和执行

### 系统价值

- **🎛️ 自动化质量门控**：实用质量标准，避免过度要求
- **🧠 专业化分工**：每个角色专精一个领域
- **⚡ 一键式工作流**：从需求到交付全自动化
- **📊 智能决策**：自动选择合适的工具和策略

## 🚀 快速开始

### 安装配置

```bash
# 用户级配置（推荐）
cd ~
git clone https://github.com/ysicing/claude-code-workflow.git .claude

# 或者项目级配置
cd your-project  
git clone https://github.com/ysicing/claude-code-workflow.git .claude

# 使用示例配置
cd .claude
cp CLAUDE.md.example CLAUDE.md
```

### 第一个工作流

```bash
# 进入项目目录
cd your-project

# 快速开发工作流
/requirements-pilot "实现JWT用户认证功能"

# 规范驱动开发
/kiro "设计用户权限管理系统"

# 企业级开发
/bmad-pilot "构建微服务API网关"
```

## 📋 三大核心工作流

### 🚀 Requirements-Pilot：快速开发

**适用场景**：
- 日常功能开发（80%场景）
- 快速原型验证
- 个人项目和小团队

**工作流程**：
```
需求描述 → 自动分析 → 代码实现 → 质量检查 → 完成交付
```

**使用示例**：
```bash
/requirements-pilot "实现Redis缓存中间件"
/requirements-pilot "添加用户头像上传功能"
/requirements-pilot "优化数据库查询性能"
```

**特点**：
- ✅ 端到端自动化
- ✅ 质量门控保证
- ✅ 快速迭代交付
- ✅ 适合敏捷开发

### 📋 Kiro：规范驱动开发

**适用场景**：
- 复杂功能设计
- 系统架构规划
- 需要详细文档的项目

**工作流程**：
```
需求文档 → 设计文档 → 任务分解 → 实施计划
```

**使用示例**：
```bash
/kiro "设计分布式日志系统"
/kiro "规划电商系统架构"  
/kiro "设计API网关方案"
```

**特点**：
- ✅ 结构化文档输出
- ✅ 3阶段渐进设计
- ✅ 需求和设计完整
- ✅ 适合大型项目

### 🏢 BMAD-Pilot：企业级协作

**适用场景**：
- 企业级项目
- 高质量要求
- 团队协作开发

**工作流程**：
```
产品规划 → 架构设计 → 开发实现 → 质量保证 → 发布管理
```

**使用示例**：
```bash
/bmad-pilot "构建SaaS平台"
/bmad-pilot "开发金融交易系统"
/bmad-pilot "实现企业ERP系统"
```

**特点**：
- ✅ AI团队协作
- ✅ 完整质量体系  
- ✅ 企业级标准
- ✅ 全生命周期管理

## 🛠️ 13个核心命令详解

### 📊 分析工具（4个）

#### `/ask` - 架构师咨询
**用途**：获取专业的系统设计和架构建议
```bash
/ask "如何设计高可用的微服务架构？"
/ask "数据库分库分表策略选择"
/ask "缓存架构设计最佳实践"
```

#### `/ultrathink` - 深度结构化分析  
**用途**：MECE原则的全面分析和技术对比
```bash
/ultrathink "云原生 vs 传统架构的技术选型"
/ultrathink "GraphQL vs REST API 设计对比"
/ultrathink "容器化部署策略分析"
```

#### `/story-breakdown` - 功能分解
**用途**：将复杂功能分解为可执行的小任务
```bash
/story-breakdown "完整的用户管理系统"
/story-breakdown "电商订单处理流程"
/story-breakdown "实时聊天系统功能"
```

#### `/plan` - 实施规划
**用途**：制定详细的项目实施计划和时间安排
```bash
/plan "系统重构的实施方案"
/plan "微服务迁移计划"
/plan "性能优化的分阶段计划"
```

### ⚙️ 开发工具（5个）

#### `/code` - 功能实现
**用途**：直接编写高质量、可维护的代码
```bash
/code "实现JWT认证中间件"
/code "Redis连接池管理器"  
/code "文件上传服务接口"
```

#### `/refactor` - 代码重构
**用途**：基于SOLID原则进行安全的代码重构
```bash
/refactor "这个类职责过多，请重构"
/refactor "优化这段代码的可读性"
/refactor "消除代码重复和坏味道"
```

#### `/bugfix` - 缺陷修复
**用途**：系统化诊断和修复代码问题
```bash
/bugfix "用户登录状态丢失问题"
/bugfix "API响应超时错误"
/bugfix "数据库连接泄漏问题"
```

#### `/debug` - 深度调试
**用途**：复杂问题的深度分析和调试指导
```bash
/debug "内存泄漏排查"
/debug "性能瓶颈分析"
/debug "并发问题诊断"
```

#### `/optimize` - 性能优化
**用途**：专业的性能分析和优化建议
```bash
/optimize "API响应时间优化"
/optimize "数据库查询性能提升"  
/optimize "前端加载速度优化"
```

### 🔍 质量保证（2个）

#### `/review` - 代码审查
**用途**：多维度的代码质量评估和改进建议
```bash
/review "审查这段API的安全性"
/review "检查代码的可维护性"
/review "评估架构设计质量"
```

#### `/test` - 测试策略
**用途**：智能测试方案设计和实现指导
```bash
/test "为支付模块设计测试方案"
/test "API接口的自动化测试"
/test "前端组件的单元测试"
```

## 👥 5个专业角色

### 🏗️ architect - 系统架构师
**专业领域**：
- 系统架构设计
- 技术选型决策  
- 可扩展性规划
- 技术债务评估

**自动触发场景**：
- 架构设计问题
- 系统扩展性讨论
- 技术方案选择

**手动调用示例**：
```bash
"请architect分析这个分布式系统的架构合理性"
"architect专家评估这个技术选型方案"
```

### 🔐 security - 安全专家
**专业领域**：
- 威胁建模和风险评估
- 安全防护策略
- 代码安全审查
- 合规性检查

**自动触发场景**：
- 安全相关问题
- 敏感数据处理
- 权限控制设计

**手动调用示例**：
```bash
"security专家评估这个API的安全风险"
"请安全专家审查用户认证流程"
```

### ⚡ performance - 性能专家  
**专业领域**：
- 系统性能优化
- 瓶颈识别分析
- 负载测试规划
- 监控指标设计

**自动触发场景**：
- 性能问题分析
- 系统优化需求
- 负载能力评估

**手动调用示例**：
```bash
"performance专家分析这个查询的性能瓶颈"
"请性能专家制定系统优化方案"
```

### 🎨 frontend - 前端专家
**专业领域**：
- UI/UX设计与实现
- 现代前端框架开发
- 构建工具配置
- 可访问性优化

**自动触发场景**：
- 前端相关问题
- UI/UX设计需求
- 组件开发任务

**手动调用示例**：
```bash
"frontend专家优化这个组件的性能"
"请前端专家评估页面的可访问性"
```

### 🔍 reviewer - 代码审查专家
**专业领域**：
- 代码质量评估
- 最佳实践应用
- 可维护性分析
- 重构建议提供

**自动触发场景**：
- 代码审查需求
- 质量检查任务
- 重构方案讨论

**手动调用示例**：
```bash
"reviewer专家审查这段代码的质量"
"请代码专家评估这个模块的设计"
```

## 🧠 智能特性

### 自动路由机制

系统会根据用户输入自动判断并路由到合适的工具：

#### 直接触发（无需确认）
- **架构咨询**：涉及系统设计、技术方案的问题 → `/ask`
- **技术选择**：明确的对比、选择、评估需求 → `/ultrathink`  
- **功能分解**：复杂功能的分解和规划需求 → `/story-breakdown`

#### 询问确认
- **复杂分析**：问题描述详细且涉及多个方面 → 询问是否需要 `/ultrathink`
- **代码质量**：涉及多文件或大量代码修改 → 询问是否需要 `/review`
- **性能优化**：提到性能问题或优化需求 → 询问是否需要 `/optimize`

#### 不触发情况
- 简单直接的问题
- 明确的执行指令  
- 单一文件的小修改

### 智能后缀控制

```bash
# 强制深度分析
"技术选型问题 -u"  # 强制使用 /ultrathink

# 快速模式（禁用自动触发）
"简单问题 -q"      # 禁用智能路由

# 详细调试模式  
"性能问题 -d"      # 启用详细调试信息
```

### 用户控制选项

```bash
# 强制使用特定工具
"用 /ask 帮我分析这个架构设计"

# 明确指定专家
"请frontend专家看看这个组件设计"

# 组合使用
"先用 /ultrathink 分析，然后 /plan 制定计划"
```

## 📝 使用最佳实践

### ✅ 推荐做法

1. **优先使用工作流命令**
   ```bash
   # ✅ 推荐
   /requirements-pilot "实现用户认证功能"
   
   # ❌ 避免手动拼接
   /ask → /code → /review → /test
   ```

2. **充分描述需求**
   ```bash
   # ✅ 详细描述
   /requirements-pilot "实现支持JWT和OAuth2的用户认证，包含token刷新和登录状态记忆"
   
   # ❌ 过于简单
   /requirements-pilot "登录功能"  
   ```

3. **善用智能路由**
   ```bash
   # ✅ 让系统自动判断
   "这个React组件渲染很慢，如何优化？"  # 自动调用frontend专家
   
   # ❌ 手动指定可能不准确
   /optimize "React组件优化"
   ```

4. **合理使用后缀控制**
   ```bash
   # ✅ 需要深度分析时
   "数据库技术选型 -u"  # 强制深度分析
   
   # ✅ 简单问题时 
   "如何写一个for循环 -q"  # 快速模式
   ```

### ❌ 常见误区

1. **过度分解**：简单功能不需要story-breakdown
2. **工具堆叠**：避免在一次对话中使用过多命令
3. **质量焦虑**：相信系统的质量门控标准
4. **忽略智能路由**：让系统自动判断通常比手动指定更准确

### 🎯 场景化使用指南

#### 新功能开发
```bash
# 简单功能
/requirements-pilot "实现用户头像上传"

# 复杂功能  
/kiro "设计完整的用户管理系统"
```

#### 问题诊断修复
```bash
# 代码问题
/bugfix "用户登录失败，错误信息不明确"

# 性能问题
/debug "API响应时间超过5秒，需要排查"
```

#### 架构设计
```bash
# 获取建议
/ask "如何设计高并发的秒杀系统？"

# 深度分析
/ultrathink "微服务 vs 单体架构的选择"
```

#### 质量保证
```bash
# 代码审查
/review "请审查这个支付接口的安全性"

# 测试规划
/test "为这个用户注册流程设计测试用例"
```

## 🔧 扩展工具

### 按需使用的辅助工具

除了13个核心命令，系统还提供丰富的专业扩展工具：

#### Git 智能工具
- `/git-cm` - 智能提交信息生成 + 完整Git操作
- `/git-msg` - 纯提交信息生成器

#### GitHub 协作工具
- `/gh/fix-issue` - GitHub Issue 修复工具
- `/gh/review-pr` - Pull Request 审查工具

#### 搜索与信息获取
- `/search-gemini` - 网络搜索获取最新信息
- `/ctx7` - 使用MCP的Context7搜索技术文档

#### 深度分析工具
- `/think-harder` - 复杂问题深度分析
- `/think-ultra` - 战略级深度思考
- `/multi-role` - 多专家并行分析
- `/role-debate` - 专业角色间深度辩论

#### 创新与辅助工具
- `/eureka` - 创新解决方案探索
- `/translate` - 多语言翻译支持
- `/screenshot` - 智能屏幕截图分析（仅 macOS）

#### Claude Code 系统工具
- `/cc/create-command` - 创建新命令工具
- `/cc/reflection` - 会话反思工具
- `/cc/reflection-harder` - 深度反思工具
- `/cc/style-ai-writting` - AI 写作风格检查

### 扩展工具使用场景

```bash
# Git 操作
/git-cm  # 自动生成提交信息并执行提交
/git-msg  # 仅生成提交信息

# GitHub 协作
/gh/fix-issue "修复issue #123的登录问题"
/gh/review-pr "审查PR #45的代码质量"

# 信息获取
/search-gemini "2024年最新的React性能优化技巧"
/ctx7 "Next.js的服务端渲染配置"

# 深度分析
/think-harder "分析这个架构设计的深层问题"
/multi-role "多专家评估这个技术方案"
/role-debate "前端 vs 后端关于API设计的辩论"

# 创新辅助
/eureka "为这个老问题寻找创新解决方案"
/translate "将这段英文技术文档翻译为中文"
/screenshot  # 分析屏幕截图中的问题

# 系统工具
/cc/create-command "创建一个新的自定义命令"
/cc/reflection "分析这次开发会话的学习要点"
/cc/style-ai-writting "优化这段AI写作的风格"
```

## 🚀 进阶使用

### 组合使用模式

#### 大型项目开发流程
```bash
# 1. 规范设计阶段
/kiro "设计电商平台的用户管理系统"

# 2. 分模块实现
/requirements-pilot "实现用户注册模块"
/requirements-pilot "实现用户认证模块"  
/requirements-pilot "实现权限管理模块"

# 3. 集成优化
/optimize "优化整体系统性能"
/review "进行系统安全审查"
```

#### 问题排查流程
```bash
# 1. 问题分析
/debug "分析系统性能瓶颈"

# 2. 制定方案
/plan "制定性能优化计划"

# 3. 实施优化
/optimize "执行性能优化方案"

# 4. 验证结果
/test "验证优化效果"
```

#### 重构流程
```bash
# 1. 现状分析
/review "分析现有代码的问题"

# 2. 重构规划
/plan "制定重构实施计划"

# 3. 逐步重构
/refactor "重构用户服务模块"
/refactor "重构数据访问层"

# 4. 质量验证
/test "为重构模块补充测试"
```

## 📊 质量保证体系

### 通用质量标准

系统采用实用的质量标准：

#### 提交要求
- ✅ 代码能正常运行，核心功能工作正常
- ✅ 无阻塞性错误或异常
- ✅ 单一逻辑工作单元
- ✅ 提交信息清晰说明变更内容
- ⚠️ 允许非阻塞性警告（可后续优化）

#### 代码审查重点
1. **功能正确性** - 实现符合需求，处理主要边界情况
2. **代码可读性** - 命名清晰，结构合理，注释适当  
3. **基本安全性** - 避免明显安全问题，基本输入验证
4. **性能合理性** - 无明显性能问题，避免低效算法
5. **测试覆盖** - 核心功能有基本测试，关键路径验证

### 自动审查触发

系统会在以下情况自动建议代码审查：
- 修改超过50行代码时
- 涉及关键文件（API、数据库、安全相关）
- 引入新依赖或重构核心功能

## 🛠️ 故障排除

### 常见问题

#### Q: 系统没有自动触发合适的工具
**A**: 
1. 检查问题描述是否足够具体
2. 尝试使用后缀 `-u` 强制深度分析
3. 直接指定工具：`/ask "你的问题"`

#### Q: 工作流执行中断了
**A**:
1. 检查当前执行状态
2. 使用 `/plan` 制定继续执行计划
3. 分步骤完成剩余任务

#### Q: 代码质量不满足要求  
**A**:
1. 使用 `/review` 进行详细审查
2. 根据审查建议进行改进
3. 使用 `/refactor` 进行代码重构

### 性能优化建议

1. **充分描述需求**：详细的需求描述有助于系统更准确地判断和执行
2. **合理使用工作流**：优先使用三大工作流，而不是手动拼接命令
3. **善用智能路由**：让系统自动判断通常比手动指定更准确
4. **适当使用扩展工具**：核心命令覆盖不到的场景才使用扩展工具

## 📚 参考资料

### 核心文档
- [`README.md`](./README.md) - 系统概览和快速开始
- [`GUIDE.md`](./GUIDE.md) - 5分钟快速入门指南  
- [`CLAUDE.md`](./CLAUDE.md) - 系统配置文件

### 专业指南
- [`KIRO-GUIDE.md`](./KIRO-GUIDE.md) - Kiro规范驱动开发指南
- [`BMAD-PILOT-GUIDE.md`](./BMAD-PILOT-GUIDE.md) - 企业级开发指南
- [`analysis-tools-guide.md`](./analysis-tools-guide.md) - 分析工具使用指南

### 系统架构
- [`intelligent-routing-rules.md`](./intelligent-routing-rules.md) - 智能路由规则

---

🎯 **记住**：这是一个精简而强大的系统，13个核心命令 + 5个专业角色就能覆盖90%的开发场景。从简单开始，逐步深入！