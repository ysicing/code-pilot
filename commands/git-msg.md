## æäº¤æ¶ˆæ¯

ä»æš‚å­˜çš„æ›´æ”¹ï¼ˆgit diff --stagedï¼‰ç”Ÿæˆåˆé€‚çš„æäº¤æ¶ˆæ¯ã€‚ä»…ç”Ÿæˆæ¶ˆæ¯å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œä¸æ‰§è¡Œ git å‘½ä»¤ã€‚

### ä½¿ç”¨æ–¹æ³•

```bash
/git-msg [é€‰é¡¹]
```

### é€‰é¡¹

- `--format <æ ¼å¼>` : æŒ‡å®šæ¶ˆæ¯æ ¼å¼ï¼ˆconventional, gitmoji, angularï¼‰
- `--lang <è¯­è¨€>` : å¼ºåˆ¶æŒ‡å®šæ¶ˆæ¯è¯­è¨€ï¼ˆen, jaï¼‰
- `--breaking` : æ£€æµ‹å¹¶è®°å½• Breaking Change

### åŸºæœ¬ç¤ºä¾‹

```bash
# ä»æš‚å­˜çš„æ›´æ”¹ç”Ÿæˆæ¶ˆæ¯ï¼ˆè‡ªåŠ¨åˆ¤å®šè¯­è¨€ï¼‰
# ä¸»è¦å€™é€‰ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
/git-msg

# å¼ºåˆ¶æŒ‡å®šè¯­è¨€
/git-msg --lang ja
/git-msg --lang en

# æ£€æµ‹ Breaking Change
/git-msg --breaking
```

### å‰ææ¡ä»¶

**é‡è¦**: æ­¤å‘½ä»¤ä»…åˆ†ææš‚å­˜çš„æ›´æ”¹ã€‚éœ€è¦å…ˆä½¿ç”¨ `git add` æš‚å­˜æ›´æ”¹ã€‚

```bash
# å¦‚æœæ²¡æœ‰æš‚å­˜æ›´æ”¹ï¼Œä¼šæ˜¾ç¤ºè­¦å‘Š
$ /git-msg
æ²¡æœ‰æš‚å­˜çš„æ›´æ”¹ã€‚è¯·å…ˆæ‰§è¡Œ git addã€‚
```

### è‡ªåŠ¨å‰ªè´´æ¿åŠŸèƒ½

ç”Ÿæˆçš„ä¸»è¦å€™é€‰ä¼šä»¥ `git commit -m "æ¶ˆæ¯"` çš„å®Œæ•´æ ¼å¼è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ç²˜è´´æ‰§è¡Œã€‚

**å®ç°æ³¨æ„äº‹é¡¹**:

- å°†æäº¤å‘½ä»¤ä¼ é€’ç»™ `pbcopy` æ—¶ï¼Œåº”ä¸æ¶ˆæ¯è¾“å‡ºåˆ†å¼€æ‰§è¡Œ
- ä½¿ç”¨ `printf` è€Œä¸æ˜¯ `echo` ä»¥é¿å…æœ«å°¾æ¢è¡Œ

### é¡¹ç›®è§„èŒƒè‡ªåŠ¨æ£€æµ‹

**é‡è¦**: å¦‚æœå­˜åœ¨é¡¹ç›®ç‰¹æœ‰çš„è§„èŒƒï¼Œå°†ä¼˜å…ˆä½¿ç”¨ã€‚

#### 1. CommitLint é…ç½®æ£€æŸ¥

ä»ä»¥ä¸‹æ–‡ä»¶è‡ªåŠ¨æ£€æµ‹é…ç½®ï¼š

- `commitlint.config.js`
- `commitlint.config.mjs`
- `commitlint.config.cjs`
- `commitlint.config.ts`
- `.commitlintrc.js`
- `.commitlintrc.json`
- `.commitlintrc.yml`
- `.commitlintrc.yaml`
- `package.json` çš„ `commitlint` éƒ¨åˆ†

```bash
# æœç´¢é…ç½®æ–‡ä»¶
find . -name "commitlint.config.*" -o -name ".commitlintrc.*" | head -1
```

#### 2. è‡ªå®šä¹‰ç±»å‹æ£€æµ‹

é¡¹ç›®ç‰¹æœ‰ç±»å‹ç¤ºä¾‹ï¼š

```javascript
// commitlint.config.mjs
export default {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat', 'fix', 'docs', 'style', 'refactor', 'test', 'chore',
        'wip',      // è¿›è¡Œä¸­
        'hotfix',   // ç´§æ€¥ä¿®å¤
        'release',  // å‘å¸ƒ
        'deps',     // ä¾èµ–æ›´æ–°
        'config'    // é…ç½®æ›´æ”¹
      ]
    ]
  }
}
```

#### 3. è¯­è¨€è®¾ç½®æ£€æµ‹

```javascript
// é¡¹ç›®ä½¿ç”¨ä¸­æ–‡æ¶ˆæ¯æ—¶
export default {
  rules: {
    'subject-case': [0],  // ä¸ºæ”¯æŒä¸­æ–‡è€Œç¦ç”¨
    'subject-max-length': [2, 'always', 72]  // ä¸ºä¸­æ–‡è°ƒæ•´å­—ç¬¦æ•°é™åˆ¶
  }
}
```

#### 4. ç°æœ‰æäº¤å†å²åˆ†æ

```bash
# ä»æœ€è¿‘çš„æäº¤å­¦ä¹ ä½¿ç”¨æ¨¡å¼
git log --oneline -50 --pretty=format:"%s"

# ä½¿ç”¨ç±»å‹ç»Ÿè®¡
git log --oneline -100 --pretty=format:"%s" | \
grep -oE '^[a-z]+(\([^)]+\))?' | \
sort | uniq -c | sort -nr
```

### è¯­è¨€è‡ªåŠ¨åˆ¤å®š

æ ¹æ®ä»¥ä¸‹æ¡ä»¶è‡ªåŠ¨åˆ‡æ¢ä¸­æ–‡/è‹±æ–‡ï¼š

1. **CommitLint é…ç½®**ä¸­çš„è¯­è¨€è®¾ç½®
2. **git log åˆ†æ**çš„è‡ªåŠ¨åˆ¤å®š
3. **é¡¹ç›®æ–‡ä»¶**çš„è¯­è¨€è®¾ç½®
4. **æ›´æ”¹æ–‡ä»¶**ä¸­çš„æ³¨é‡Šå’Œå­—ç¬¦ä¸²åˆ†æ

é»˜è®¤ä¸ºè‹±æ–‡ã€‚åˆ¤å®šä¸ºä¸­æ–‡é¡¹ç›®æ—¶ç”Ÿæˆä¸­æ–‡æ¶ˆæ¯ã€‚

### æ¶ˆæ¯æ ¼å¼

#### Conventional Commits (é»˜è®¤)

```
<type>: <description>
```

**é‡è¦**: å¿…é¡»ç”Ÿæˆå•è¡Œæäº¤æ¶ˆæ¯ã€‚ä¸ç”Ÿæˆå¤šè¡Œæ¶ˆæ¯ã€‚

**æ³¨æ„**: å¦‚æœé¡¹ç›®æœ‰ç‰¹æœ‰è§„èŒƒï¼Œå°†ä¼˜å…ˆä½¿ç”¨ã€‚

### æ ‡å‡†ç±»å‹

**å¿…é¡»ç±»å‹**:

- `feat`: æ–°åŠŸèƒ½ï¼ˆç”¨æˆ·å¯è§çš„åŠŸèƒ½æ·»åŠ ï¼‰
- `fix`: ç¼ºé™·ä¿®å¤

**å¯é€‰ç±»å‹**:

- `build`: æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–çš„æ›´æ”¹
- `chore`: å…¶ä»–æ›´æ”¹ï¼ˆä¸å½±å“å‘å¸ƒï¼‰
- `ci`: CI é…ç½®æ–‡ä»¶æˆ–è„šæœ¬çš„æ›´æ”¹
- `docs`: ä»…æ–‡æ¡£æ›´æ”¹
- `style`: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºæ ¼ã€æ ¼å¼ã€åˆ†å·ç­‰ï¼‰
- `refactor`: æ—¢ä¸ä¿®å¤ç¼ºé™·ä¹Ÿä¸æ·»åŠ åŠŸèƒ½çš„ä»£ç æ›´æ”¹
- `perf`: æ€§èƒ½æ”¹è¿›
- `test`: æ·»åŠ æˆ–ä¿®æ­£æµ‹è¯•

### è¾“å‡ºç¤ºä¾‹ï¼ˆè‹±æ–‡é¡¹ç›®ï¼‰

```bash
$ /git-msg

ğŸ“ æäº¤æ¶ˆæ¯å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é€‰:
feat: implement JWT-based authentication system

ğŸ“‹ å¤‡é€‰æ–¹æ¡ˆ:
1. feat: add user authentication with JWT tokens
2. fix: resolve token validation error in auth middleware
3. refactor: extract auth logic into separate module

âœ… `git commit -m "feat: implement JWT-based authentication system"` å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
```

**å®ç°ç¤ºä¾‹ï¼ˆä¿®æ­£ç‰ˆï¼‰**:

```bash
# å…ˆå°†æäº¤å‘½ä»¤å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆæ— æ¢è¡Œï¼‰
printf 'git commit -m "%s"' "$COMMIT_MESSAGE" | pbcopy

# ç„¶åæ˜¾ç¤ºæ¶ˆæ¯
cat << EOF
ğŸ“ æäº¤æ¶ˆæ¯å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é€‰:
$COMMIT_MESSAGE

ğŸ“‹ å¤‡é€‰æ–¹æ¡ˆ:
1. ...
2. ...
3. ...

âœ… `git commit -m "$COMMIT_MESSAGE"` å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
EOF
```

### è¾“å‡ºç¤ºä¾‹ï¼ˆä¸­æ–‡é¡¹ç›®ï¼‰

```bash
$ /git-msg

ğŸ“ æäº¤æ¶ˆæ¯å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é€‰:
feat: å®ç° JWT è®¤è¯ç³»ç»Ÿ

ğŸ“‹ å¤‡é€‰æ–¹æ¡ˆ:
1. feat: æ·»åŠ åŸºäº JWT ä»¤ç‰Œçš„ç”¨æˆ·è®¤è¯
2. fix: è§£å†³è®¤è¯ä¸­é—´ä»¶çš„ä»¤ç‰ŒéªŒè¯é”™è¯¯
3. refactor: å°†è®¤è¯é€»è¾‘æå–åˆ°ç‹¬ç«‹æ¨¡å—

âœ… `git commit -m "feat: å®ç° JWT è®¤è¯ç³»ç»Ÿ"` å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
```

### å·¥ä½œæ¦‚è¦

1. **åˆ†æ**: åˆ†æ `git diff --staged` çš„å†…å®¹
2. **ç”Ÿæˆ**: ç”Ÿæˆåˆé€‚çš„æäº¤æ¶ˆæ¯
3. **å¤åˆ¶**: è‡ªåŠ¨å°†ä¸»è¦å€™é€‰å¤åˆ¶åˆ°å‰ªè´´æ¿

**æ³¨æ„**: æ­¤å‘½ä»¤ä¸æ‰§è¡Œ git add æˆ– git commitã€‚ä»…ç”Ÿæˆæäº¤æ¶ˆæ¯å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚

### æ™ºèƒ½åŠŸèƒ½

#### 1. æ›´æ”¹å†…å®¹è‡ªåŠ¨åˆ†ç±»ï¼ˆä»…æš‚å­˜æ–‡ä»¶ï¼‰

- æ–°æ–‡ä»¶æ·»åŠ  â†’ `feat`
- é”™è¯¯ä¿®å¤æ¨¡å¼ â†’ `fix`
- ä»…æµ‹è¯•æ–‡ä»¶ â†’ `test`
- é…ç½®æ–‡ä»¶æ›´æ”¹ â†’ `chore`
- README/docs æ›´æ–° â†’ `docs`

#### 2. é¡¹ç›®è§„èŒƒè‡ªåŠ¨æ£€æµ‹

- `.gitmessage` æ–‡ä»¶
- `CONTRIBUTING.md` ä¸­çš„è§„èŒƒ
- è¿‡å»æäº¤å†å²æ¨¡å¼

#### 3. è¯­è¨€åˆ¤å®šè¯¦æƒ…ï¼ˆä»…æš‚å­˜æ›´æ”¹ï¼‰

```bash
# åˆ¤å®šåŸºå‡†ï¼ˆä¼˜å…ˆçº§ï¼‰
1. ä» git diff --staged çš„å†…å®¹åˆ¤å®šè¯­è¨€
2. æš‚å­˜æ–‡ä»¶çš„æ³¨é‡Šåˆ†æ
3. git log --oneline -20 çš„è¯­è¨€åˆ†æ
4. é¡¹ç›®ä¸»è¦è¯­è¨€è®¾ç½®
```

#### 4. æš‚å­˜åˆ†æè¯¦æƒ…

åˆ†æä½¿ç”¨çš„ä¿¡æ¯ï¼ˆä»…è¯»å–ï¼‰:

- `git diff --staged --name-only` - æ›´æ”¹æ–‡ä»¶åˆ—è¡¨
- `git diff --staged` - å®é™…æ›´æ”¹å†…å®¹
- `git status --porcelain` - æ–‡ä»¶çŠ¶æ€

### Breaking Change æ£€æµ‹æ—¶

å½“æœ‰ API ç ´åæ€§æ›´æ”¹æ—¶ï¼š

**è‹±æ–‡**:

```bash
feat!: change user API response format

BREAKING CHANGE: user response now includes additional metadata
```

æˆ–

```bash
feat(api)!: change authentication flow
```

**ä¸­æ–‡**:

```bash
feat!: æ›´æ”¹ç”¨æˆ· API å“åº”æ ¼å¼

BREAKING CHANGE: å“åº”ç°åœ¨åŒ…å«é¢å¤–çš„å…ƒæ•°æ®
```

æˆ–

```bash
feat(api)!: æ›´æ”¹è®¤è¯æµç¨‹
```

### æœ€ä½³å®è·µ

1. **é€‚åº”é¡¹ç›®**: éµå¾ªç°æœ‰çš„æäº¤è¯­è¨€
2. **ç®€æ´æ€§**: 50 å­—ç¬¦å†…è¦æ¸…æ¥š
3. **ä¸€è‡´æ€§**: ä¸è¦æ··åˆä½¿ç”¨ï¼ˆè‹±æ–‡å°±ç»Ÿä¸€è‹±æ–‡ï¼‰
4. **OSS**: å¼€æºè½¯ä»¶æ¨èè‹±æ–‡
5. **åšæŒå•è¡Œ**: å¿…é¡»å•è¡Œæäº¤æ¶ˆæ¯ï¼ˆéœ€è¦è¯¦ç»†è¯´æ˜æ—¶åœ¨ PR ä¸­è¡¥å……ï¼‰

### å¸¸è§æ¨¡å¼

**è‹±æ–‡**:

```
feat: add user registration endpoint
fix: resolve memory leak in cache manager
docs: update API documentation
```

**ä¸­æ–‡**:

```
feat: æ·»åŠ ç”¨æˆ·æ³¨å†Œç«¯ç‚¹
fix: è§£å†³ç¼“å­˜ç®¡ç†å™¨å†…å­˜æ³„æ¼
docs: æ›´æ–° API æ–‡æ¡£
```

### ä¸ Claude çš„åä½œ

```bash
# ä¸æš‚å­˜æ›´æ”¹ç»“åˆä½¿ç”¨
git add -p  # äº¤äº’å¼æš‚å­˜
/git-msg
"ç”Ÿæˆæœ€ä¼˜çš„æäº¤æ¶ˆæ¯"

# ä»…æš‚å­˜ç‰¹å®šæ–‡ä»¶ååˆ†æ
git add src/auth/*.js
/git-msg --lang en
"ä¸ºè®¤è¯ç›¸å…³æ›´æ”¹ç”Ÿæˆåˆé€‚çš„æ¶ˆæ¯"

# Breaking Change æ£€æµ‹å’Œåº”å¯¹
git add -A
/git-msg --breaking
"å¦‚æœ‰ç ´åæ€§æ›´æ”¹è¯·é€‚å½“æ ‡è®°"
```

### æ³¨æ„äº‹é¡¹

- **å‰ææ¡ä»¶**: æ›´æ”¹éœ€è¦å…ˆé€šè¿‡ `git add` æš‚å­˜
- **é™åˆ¶äº‹é¡¹**: æœªæš‚å­˜çš„æ›´æ”¹ä¸åœ¨åˆ†æèŒƒå›´å†…
- **æ¨èäº‹é¡¹**: è¯·äº‹å…ˆç¡®è®¤é¡¹ç›®ç°æœ‰çš„æäº¤è§„èŒƒ
