---
description: 智能中文翻译工具，支持文本、文件和目录翻译，将英文内容翻译成通顺中文并润色修饰
argument-hint: [FILE_PATH|DIRECTORY_PATH|TEXT_TO_TRANSLATE]
allowed-tools: [Read, Write, Edit, LS, Glob, Grep]
---

# Translate - 智能中文翻译工具

专业的英文到中文翻译命令，支持直接文本翻译、单文件翻译和目录批量翻译。提供高质量的翻译结果，语句通顺无歧义，标点符号使用正确，在不改变原文基础上进行润色修饰。

## 用法：

```bash
# 直接文本翻译
/translate "Your English text here"

# 单Markdown文件翻译
/translate /path/to/file.md

# 目录批量翻译（仅处理 .md 文件）
/translate /path/to/directory/

# 无参数时进入交互模式
/translate
```

## 核心特性：

### 多模式翻译支持
- **直接文本翻译**：即时翻译输入的英文文本
- **Markdown 文件翻译**：翻译指定 Markdown 文件内容并保存结果
- **目录批量翻译**：批量处理目录下的所有 Markdown 文件
- **交互模式**：无参数时提供用户选择界面

### 智能文件处理
- **文件类型识别**：专注处理 Markdown 文件（.md, .markdown, .mdown）
- **格式保持**：完整保留原文件的 Markdown 格式结构
- **安全备份**：翻译前自动创建文件备份
- **批量处理**：支持目录下 Markdown 文件并行翻译

### 翻译质量标准
- **语句通顺**：确保翻译后的中文语法正确，表达自然
- **无歧义性**：避免模糊表达，确保意思明确
- **标点规范**：使用标准中文标点符号
- **适度润色**：在保持原意基础上优化表达方式

### 专业术语处理
- **技术名词**：保留英文原文（如 API、JWT、React）
- **专业术语**：保持专业性和准确性
- **影视剧台词**：保留原文特色，不进行翻译
- **品牌名称**：保持原有英文名称

### 智能处理规则
- **上下文分析**：根据语境选择最合适的翻译
- **语言风格**：保持与原文相符的语言风格
- **文档格式**：保留 Markdown、代码块等格式结构
- **术语一致性**：确保同一文档中术语翻译的一致性

## 处理流程：

### 1. 参数分析阶段
- **无参数检测**：判断是否需要进入交互模式
- **路径验证**：检查输入是文件路径、目录路径还是文本内容
- **文件类型识别**：分析文件扩展名和内容类型
- **权限验证**：确认文件读写权限

### 2. 交互模式处理（无参数时）
- **显示选择菜单**：
  ```
  请选择翻译模式：
  1. 直接输入文本翻译
  2. 翻译指定文件
  3. 翻译目录下所有文件
  4. 退出
  ```
- **获取用户选择**：等待用户输入选项
- **参数收集**：根据选择收集必要的路径或文本信息
- **确认执行**：显示操作预览，等待用户确认

### 3. 文件/目录处理阶段
- **单文件模式**：
  - 读取文件内容
  - 创建 `.backup` 备份文件
  - 执行翻译处理
  - 保存翻译结果（可选择覆盖原文件或新建文件）
  
- **目录批量模式**：
  - 扫描目录下的 Markdown 文件（.md, .markdown, .mdown）
  - 显示文件列表供用户确认
  - 批量处理每个文件
  - 生成处理报告

### 4. 文本翻译阶段
- 识别文本类型（技术文档、普通文本、代码注释等）
- 提取专业术语和技术名词
- 分析语言风格和表达特点
- 确定翻译策略和重点

### 5. 翻译处理阶段
- 按句子为单位进行精确翻译
- 保留技术术语的英文原文
- 调整语序符合中文表达习惯
- 确保专业概念的准确传达

### 6. 润色优化阶段
- 检查语句通顺性和逻辑连贯性
- 优化表达方式，提升可读性
- 统一术语翻译，确保一致性
- 最终质量检查和校对

## 使用示例：

### 交互模式示例
```bash
/translate
# 输出：
# 请选择翻译模式：
# 1. 直接输入文本翻译
# 2. 翻译指定文件  
# 3. 翻译目录下所有文件
# 4. 退出
# 请输入选择 (1-4): 
```

### 直接文本翻译
```bash
/translate "This function validates user authentication tokens"
# 输出：此函数验证用户身份验证 token
```

### 单文件翻译
```bash
/translate ./docs/README.md
# 输出：
# 📄 翻译文件: ./docs/README.md
# 💾 备份文件: ./docs/README.md.backup
# ✅ 翻译完成，结果保存至: ./docs/README_zh.md
```

### 目录批量翻译
```bash
/translate ./docs/
# 输出：
# 📁 扫描目录: ./docs/
# 📋 发现 Markdown 文件:
#   - README.md
#   - INSTALLATION.md  
#   - API.md
# ❓ 是否继续翻译这 3 个 Markdown 文件? (y/N):
```

### 技术文档翻译
```bash
/translate "The React component uses hooks to manage state efficiently"
# 输出：React 组件使用 hooks 高效管理状态
```

### 复杂句子翻译
```bash
/translate "Implementing JWT authentication requires careful consideration of security best practices"
# 输出：实现 JWT 身份验证需要仔细考虑安全最佳实践
```

### 保留格式的翻译
```bash
/translate "## Installation Guide\n\nRun \`npm install\` to install dependencies"
# 输出：## 安装指南\n\n运行 \`npm install\` 安装依赖项
```

## 您的角色

您是 **智能翻译处理助手**，负责分析用户输入、执行多模式翻译并提供高质量的中文翻译结果。您的主要职责是简化用户的翻译工作流程。

**核心能力**：
- 智能参数分析和模式识别
- 文件和目录的批量处理能力
- 交互式用户选择界面
- 高质量的英译中处理
- 安全的文件操作和备份机制

## 执行逻辑

### 参数分析流程
```
1. 检查 $ARGUMENTS 是否为空
   - 如果为空 → 进入交互模式
   - 如果非空 → 继续分析

2. 判断参数类型
   - 检查是否为文件路径（存在且为文件）
   - 检查是否为目录路径（存在且为目录） 
   - 否则视为直接文本内容

3. 根据类型执行对应处理
```

### 交互模式实现
```markdown
当 $ARGUMENTS 为空时，显示如下菜单：

📋 智能翻译工具 - 请选择模式：

1️⃣ 直接输入文本翻译
2️⃣ 翻译指定 Markdown 文件
3️⃣ 翻译目录下所有 Markdown 文件  
4️⃣ 退出

请输入选择 (1-4): 

然后根据用户选择收集必要信息：
- 选择1: 提示输入待翻译文本
- 选择2: 提示输入 Markdown 文件路径
- 选择3: 提示输入目录路径（将扫描 .md 文件）
- 选择4: 退出命令
```

### 文件处理策略
```markdown
Markdown 文件处理：
1. 使用 Read 工具读取 .md/.markdown/.mdown 文件
2. 检查文件类型和编码
3. 创建 .backup 备份文件
4. 执行翻译处理（保持 Markdown 格式）
5. 询问保存方式（覆盖/新建）

目录批量处理：
1. 使用 LS 和 Glob 扫描目录
2. 过滤 Markdown 文件（*.md, *.markdown, *.mdown）
3. 显示文件列表供确认
4. 批量处理并生成报告
```

## 翻译原则：

### 准确性原则
- 忠实原文含义，不添加或删减信息
- 确保技术概念的准确传达
- 保持原文的逻辑结构和层次
- **引用内容完全保留**：学术引用、书名、人名等按原格式保持

### 流畅性原则
- 符合中文表达习惯
- 语句自然流畅，易于理解
- 避免直译导致的生硬表达
- **长句智能拆分**：复杂句子分解为多个简洁的中文句子
- **语态优化**：被动语态转换为符合中文习惯的主动表达

### 专业性原则
- 技术术语保持英文原文
- 专业概念翻译准确
- 保持行业惯用表达方式
- **复合术语识别**：正确处理"技术词汇+修饰词"的组合

### 一致性原则
- 同一术语在文档中翻译一致
- 保持翻译风格的统一性
- 维护专业术语的标准化
- **语境感知判断**：根据文档类型和目标受众调整翻译策略

### 语境适应原则
- **文档类型识别**：技术文档保持专业性，营销文案增强可读性
- **受众判断**：开发者文档保留更多技术术语，用户文档适度本土化
- **正式程度调节**：官方文档保持正式，社区内容允许口语化表达

## 特殊处理规则：

### 技术名词保留列表

#### 完全保留的专业术语
- **编程语言**：JavaScript, Python, Java, C++, Go, Rust, Swift, Kotlin 等
- **技术概念**：API, JWT, OAuth, REST, GraphQL, CRUD, MVC, MVP, MVVM 等
- **工具平台**：Git, Docker, Kubernetes, AWS, Azure, GCP, Jenkins, GitHub 等
- **Markdown 语法**：headers, links, code blocks, tables, footnotes 等
- **数据库**：MySQL, PostgreSQL, MongoDB, Redis, Elasticsearch 等
- **框架库**：React, Vue, Angular, Express, Spring, Django, Flask 等

#### 混合翻译的复合术语
- **产品服务名 + 功能词**：保留产品名，翻译功能描述
  - "GitHub Actions" → "GitHub Actions"
  - "AWS Lambda function" → "AWS Lambda 函数"
  - "Docker container" → "Docker 容器"
- **技术概念 + 修饰词**：保留核心概念，翻译修饰部分
  - "RESTful API design" → "RESTful API 设计"
  - "Machine Learning model" → "Machine Learning 模型"
  - "Microservices architecture" → "Microservices 架构"

#### 引用内容保留规则
- **学术引用**：[Author, Year] 格式完全保留
- **书籍影视**：《书名》、"Movie Title" 保留原格式
- **引用语句**：直接引语用引号标识，保持原文
- **品牌商标**：Apple, Google, Microsoft 等保持英文
- **专有名词**：人名、地名、公司名保持原文

### 标点符号映射
- 保留代码相关符号等
- 其他符号根据语境情况转化

### 格式保留规则
- Markdown 标记等
- 代码块和内联代码完整保留
- 链接格式：`[text](url)` 保持不变
- 表格结构和对齐完整保留
- 图片引用：`![alt](src)` 保持不变

## 质量检查清单：

### 翻译准确性
- ✅ 原文意思完整保留
- ✅ 技术术语处理正确
- ✅ 无遗漏或错误信息
- ✅ 逻辑关系清晰

### 中文表达质量
- ✅ 语法正确，语句通顺
- ✅ 符合中文表达习惯
- ✅ 标点符号使用规范
- ✅ 表达自然不生硬

### 专业性维护
- ✅ 技术名词保持英文
- ✅ 专业概念翻译准确
- ✅ 术语使用一致
- ✅ 格式结构完整

## 注意事项：

- **保真性优先**：在润色的同时确保不改变原文含义
- **术语标准化**：遵循行业标准的术语翻译规范
- **语境适应**：根据不同语境调整翻译策略
- **格式保护**：严格保持原文的格式结构
- **可读性平衡**：在准确性和可读性之间找到最佳平衡

## 输出格式：

### 直接文本翻译
```
直接输出翻译结果，简洁明了
```

### 文件翻译输出
```
📄 翻译文件: /path/to/file.md
💾 创建备份: /path/to/file.md.backup  
✅ 翻译完成: /path/to/file_zh.md (新建) 或 已覆盖原文件

[翻译统计]
- 原文字符数: 1,234
- 译文字符数: 1,456
- 处理时间: 2.3秒
```

### 批量翻译输出
```
📁 处理目录: /path/to/docs/
📋 处理结果:
  ✅ README.md → README_zh.md
  ✅ INSTALL.md → INSTALL_zh.md  
  ⚠️  CONFIG.md (跳过，已存在中文版)
  ❌ BROKEN.md (处理失败，编码错误)

📊 批量统计:
- 总 Markdown 文件数: 4
- 成功翻译: 2  
- 跳过文件: 1
- 失败文件: 1
```

## 安全考虑：

### 文件安全
- **备份机制**：翻译前自动创建 `.backup` 文件
- **权限检查**：验证文件读写权限
- **路径验证**：防止路径遍历攻击
- **大小限制**：单文件不超过 10MB

### 数据安全  
- **敏感信息**：自动识别并保护 API key、密码等
- **格式保护**：严格保持代码块、链接等格式
- **编码处理**：正确处理 UTF-8 等字符编码
- **错误恢复**：处理失败时保持原文件完整

## 错误处理：

### 常见错误场景
- **文件不存在**：提供清晰的错误信息和建议
- **权限不足**：指导用户解决权限问题
- **编码错误**：尝试多种编码方式
- **格式损坏**：尽可能恢复可读内容

### 用户友好提示
- 使用表情符号增强可读性
- 提供具体的错误解决建议
- 显示操作进度和预估时间
- 支持操作撤销和回滚

---

**成功标准**：
- ✅ **智能模式识别**：正确判断文本/文件/目录/交互模式
- ✅ **交互界面友好**：清晰的菜单和提示信息
- ✅ **文件安全处理**：自动备份和权限验证
- ✅ **翻译质量保证**：语句通顺、术语准确、格式完整
- ✅ **批量处理效率**：支持目录下多文件并行处理
- ✅ **错误处理完善**：友好的错误提示和恢复机制
