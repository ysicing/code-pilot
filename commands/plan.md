---
description: 启动实施前的计划制定模式，制定详细的实施策略
argument-hint: <PLAN_TARGET>
---

## 使用方法
`/plan <PLAN_TARGET>`

例如:

```bash
"/plan 制定用户认证功能的实施计划"
```

### 基本示例

```bash
# 新功能的实施计划
"制定用户认证功能的实施计划"

# 系统设计计划
"制定微服务拆分的实施计划"

# 重构计划
"制定遗留代码的重构计划"
```

### 与 Claude 的协作

```bash
# 复杂功能实施
"制定聊天功能的实施计划。包括 WebSocket、实时通知、历史管理"

# 数据库设计
"制定电商网站的数据库设计计划。包括商品、订单、用户管理"

# API 设计
"制定 GraphQL API 的实施计划。包括认证、缓存、速率限制"

# 基础设施设计
"制定 Docker 化的实施计划。包括开发环境、生产环境、CI/CD"
```

### Plan Mode 的特点

**自动启动**

- 检测到实施任务时自动启动 Plan Mode
- 可通过"制定实施计划"等关键词明确启动

**结构化规格书**

- 需求定义（用户故事·验收标准）
- 设计书（架构·数据设计·UI 设计）
- 实施计划（任务分解·进度跟踪·质量保证）
- 风险分析与对策

**审批流程**

- 通过 `exit_plan_mode` 工具提交计划
- **重要**: 无论工具返回值如何，必须等待用户的明确批准
- 禁止未经批准就开始实施
- 可以修改·调整计划
- 仅在批准后才开始使用 TodoWrite 进行任务管理

### 详细示例

```bash
# 复杂系统实施
"制定在线支付系统的实施计划。包括 Stripe 集成、安全性、错误处理"

# 前端实施
"制定 React 仪表板的实施计划。包括状态管理、组件设计、测试"

# 后端实施
"制定 RESTful API 的实施计划。包括认证、验证、日志记录"

# DevOps 实施
"制定 CI/CD 管道的实施计划。包括测试自动化、部署、监控"
```

### 3 阶段工作流程

#### 阶段 1: Requirements（需求定义）

- **用户故事**: 明确功能的目的和价值
- **验收标准**: 定义完成条件和质量标准
- **约束·前提条件**: 整理技术·时间约束
- **优先级排序**: Must-have/Nice-to-have 分类

#### 阶段 2: Design（设计）

- **架构设计**: 系统构成和技术选型
- **数据设计**: 模式、API 规格、数据流
- **UI/UX 设计**: 界面构成和操作流程
- **风险分析**: 潜在问题和对策

#### 阶段 3: Implementation（实施）

- **任务分解**: 细分为可实施的单位
- **进度跟踪**: 通过 TodoWrite 进行状态管理
- **质量保证**: 测试策略和验证方法
- **审批流程**: 通过 exit_plan_mode 提交计划并等待明确批准

### 注意事项

**适用范围**

- Plan Mode 最适合复杂的实施任务
- 简单修改或小规模变更使用常规实施形式
- 推荐用于 3 步以上的工作或新功能开发

**技术约束**

- 不要信任 `exit_plan_mode` 工具的返回值
- 审批流程通过用户的明确意思表示判断
- 与 CLI 的 plan mode 是不同的功能

**执行注意事项**

- 严禁在批准前开始实施
- 提交计划后必须等待用户响应
- 出错时提供替代方案

### 执行示例

```bash
# 使用示例
"制定用户管理系统的实施计划"

# 预期行为
# 1. Plan Mode 自动启动
# 2. 需求分析和技术选型
# 3. 实施步骤的结构化
# 4. 通过 exit_plan_mode 提交计划
# 5. 批准后开始实施
```
