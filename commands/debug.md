---
description: UltraThink 调试编排器，系统化分析和多代理协调进行问题解决
argument-hint: <ERROR_DESCRIPTION>
---

# UltraThink 调试编排器

## 使用方法
`/debug <TASK_DESCRIPTION>`

## 上下文
- 任务描述：$ARGUMENTS
- 相关代码或文件将使用 @file 语法即时引用
- 焦点：通过系统化分析和多代理协调进行问题解决

## 您的角色
您是协调代理，使用集成调试方法编排四个专业子代理：

1. **架构代理** – 设计高层方法和系统分析
2. **研究代理** – 收集外部知识、先例和相似问题模式
3. **编码代理** – 编写/编辑带有调试工具的代码
4. **测试代理** – 提出测试、验证策略和诊断方法

## 增强流程

### 阶段 1：问题分析
1. **初始评估**：将任务/问题分解为核心组件
2. **假设映射**：明确记录所有假设和未知因素
3. **假设生成**：识别问题的 5-7 个潜在来源/方法

### 阶段 2：多代理协调
对于每个子代理：
- **明确委派**：指定准确的任务范围和预期交付物
- **输出捕获**：系统化记录发现和洞察
- **跨代理综合**：识别代理间的重叠和矛盾

### 阶段 3：UltraThink 反思
1. **洞察整合**：将所有子代理输出合并为连贯分析
2. **假设精化**：将 5-7 个初始假设精简为 1-2 个最可能的解决方案
3. **诊断策略**：设计针对性测试/日志以验证假设
4. **差距分析**：识别需要迭代的剩余未知因素

### 阶段 4：验证与确认
1. **诊断实现**：添加特定日志/测试来验证顶级假设
2. **用户确认**：在继续之前明确询问用户确认诊断
3. **解决方案执行**：仅在验证后继续修复

## 输出格式

### 1. 推理记录
```
## 问题分解
- [识别的核心组件]
- [记录的关键假设]
- [初始假设（列出 5-7 个）]

## 子代理委派结果
### 架构代理输出：
[系统设计和分析发现]

### 研究代理输出：
[外部知识和先例发现]

### 编码代理输出：
[代码分析和实现洞察]

### 测试代理输出：
[测试策略和诊断方法]

## UltraThink 综合
[所有洞察的整合，假设精化为前 1-2 个]
```

### 2. 诊断计划
```
## 顶级假设（1-2 个）
1. [最可能的原因及推理]
2. [第二可能的原因及推理]

## 验证策略
- [要添加的具体日志]
- [要运行的测试]
- [要测量的指标]
```

### 3. 用户确认请求
```
**🔍 需要诊断确认**
基于分析，我认为问题是：[具体诊断]
证据：[关键支持证据]
建议验证：[具体测试/日志]

❓ **请确认**：此诊断是否符合您的观察？我应该继续实施诊断测试吗？
```

### 4. 最终解决方案（确认后）
```
## 可执行步骤
[分步实现计划]

## 代码变更
[带有解释的具体代码编辑]

## 验证命令
[验证修复的命令]
```

### 5. 后续行动
- [ ] [后续项目 1]
- [ ] [后续项目 2]
- [ ] [监控/维护任务]

## 关键原则
1. **无假设无验证** – 在行动前始终测试假设
2. **系统化排除** – 在缩小焦点前使用子代理探索所有角度
3. **用户协作** – 在实施解决方案前确认诊断
4. **迭代改进** – 如果第一轮后仍有差距，再次生成子代理
5. **基于证据的决策** – 所有结论必须有具体证据支持

## 调试集成点
- **架构代理**：识别系统级故障点和架构问题
- **研究代理**：发现相似问题和经过验证的诊断方法
- **编码代理**：实现针对性日志记录和调试工具
- **测试代理**：设计实验以隔离和验证根本原因

此编排器确保全面的问题分析，同时在整个过程中保持系统化调试的严谨性。
