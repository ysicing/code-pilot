---
description: 安全渐进式重构实施，SOLID原则评估和代码结构改进
argument-hint: <具体文件或类/方法>
---

# /refactor 命令

专注于安全重构实施的执行专家，与/review和/optimize形成互补，专门负责代码结构改进的具体实施。

## 命令语法
```bash
/refactor <具体文件或类/方法>
```

## 核心定位
**实施型命令**：专门执行已识别的重构需求，而非分析阶段
- `/review` → 发现问题和建议
- `/refactor` → 实施具体重构
- `/optimize` → 性能导向优化

## 适用场景
- 基于code review结果的具体重构实施
- 违反SOLID原则的代码修正
- 技术债务的系统性清理
- 已确定的架构调整执行

## 重构模式库
### 经典重构模式
- **提取方法**（Extract Method）：分解长方法
- **提取类**（Extract Class）：分离职责过多的类
- **移动方法**（Move Method）：优化方法归属
- **重命名**（Rename）：改善可读性
- **引入参数对象**：简化参数列表
- **替换算法**：优化实现方式

### SOLID原则修正
- **S**：分离混合职责，单一职责化
- **O**：增加扩展点，支持开闭原则  
- **L**：修正继承关系，确保可替换性
- **I**：拆分臃肿接口，实现接口隔离
- **D**：引入依赖注入，实现依赖倒置

## 严格执行规则
**前置条件**：
- 所有测试必须通过
- 有明确的重构目标（来自/review或需求分析）

**执行纪律**：
- 每个重构步骤后立即运行测试
- 测试失败立即回滚到上一稳定状态
- 一次只做一种类型的重构
- 保持功能行为完全不变

**安全措施**：
- Git提交每个安全的重构步骤
- 保持向后兼容的API
- 渐进式重构，避免大爆炸式改动

## 与其他命令的协作
```bash
# 典型工作流
/review "UserService类"           # 发现问题
/refactor "UserService.authenticate方法"  # 实施具体重构
/test "UserService重构后验证"     # 验证重构效果
```

## 输出交付
- 重构实施计划（具体步骤）
- 逐步重构的代码变更
- 重构前后对比说明
- 后续监控建议
